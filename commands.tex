% Comments
\newcommand{\mycomment}[2]{{\small\color{magenta}\underline{\sf{#1}}:} {\color{magenta}{\small #2}}}
\newcommand{\todo}[1]{\mycomment{Todo}{#1}}
\newcommand{\gcmt}[1]{\mycomment{Guan}{#1}}
\newcommand{\diw}[1]{\textcolor{blue}{DW: #1}}
% \newcommand{\diwchanged}[1]{\textcolor{cyan}{#1}}
\newcommand{\diwchanged}[1]{#1}
\newcommand{\appdiwchanged}[1]{#1}
\newcommand{\diwnew}[1]{{\color{green}\emph{#1}}}

% Shorthand
\newcommand{\Da}{\Downarrow}
\newcommand{\apd}{+\!\!\!+}

% Unicode char
\usepackage{newunicodechar}
\newunicodechar{λ}{\lambda}
\newunicodechar{Σ}{\Sigma}
\newunicodechar{ρ}{\rho}
\newunicodechar{σ}{\sigma}
\newunicodechar{τ}{\tau}

% Semantics and reserved words
\mathchardef\mhyphen="2D
\usepackage[inference,ligature,reserved,shorthand]{semantic}
\reservestyle[\mathinner]{\command}{\mathit}
\command{plus, iszero}
\command{true, false, if, then, else}
\command{let, in}
\command{inl, inr}
\command{case, of}
\command{nil, cons, head, tail, isnil, body}

\command{alloc, fetch, store}

\command{iseven, store}
\command{bool, int, unit}
\command{pair, fst, snd, as}
\command{and, or, not, nand, nor, xor, for}
\command{while, print, fix, ref, var, when, do, end, robot, whereAmI, left, right, up, down}
\command{andf[and_f], andfp[and_f']}
\command{halfa[half\mhyphen adder], fulla[full\mhyphen adder], Rf[Ref]}

\reservestyle{\kword}{\texttt}
\kword{automata, input, exec, enda[end]}


\reservestyle{\Constructor}{\textsc}
\Constructor{Bool, True, False}
\Constructor{Int, Lit, Plus, Eq, Lt}
\Constructor{Abs, App, Loc, Ref}


% Macro for Osazone semantics
\NewDocumentCommand{\branch}{ >{\SplitList{&}} m }{%
  \left(\begin{aligned} %
      \ProcessList{#1}{\brfunc}%
    \end{aligned}\right)%
}

\NewDocumentCommand{\brfunc}{m}{%
  & #1%
}

\newcommand{\given}{\,\middle\vert\,}

\newcommand{\DS}[1]{\mathbb{D}(#1)} % Totally desugar
\newcommand{\ds}[1]{d^{*}(#1)} % Statically totally derivation

\newcommand{\Dad}{\underset{\text{DSL}}{\Da}} % DSL downarrow
\newcommand{\Dah}{\underset{\text{Host}}{\Da}} % Host downarrow

% Languages
% \newcommand{\LamBool}{$\lambda_{\textsc{Bool}}$}
\newcommand{\LamBool}{\textsc{Stlc}}
\newcommand{\STLC}{\textsc{Stlc}}
\newcommand{\Func}{\textsc{Func}}
\newcommand{\STLCex}{\textsc{Stlc}$_\text{ex}$}
\newcommand{\Cminor}{\textsc{Cminor}}


\newcommand{\lt}{\mathbf{let}}
\newcommand{\monad}{\mathbf{monad}~}
\newcommand{\as}{~\mathbf{as}~}

\newcommand{\Let}[2]{\lt~#1=#2;~}

\newcommand{\Exp}{\mathit{Exp}}
\newcommand{\Val}{\mathit{Val}}
\newcommand{\Type}{\mathit{Type}}
\newcommand{\Id}{\mathit{Id}}
\newcommand{\Int}{\mathit{Int}}
\newcommand{\newLoc}{\mathit{newLoc}}
\newcommand{\store}{\mathit{store}}
\newcommand{\fetch}{\mathit{fetch}}
\newcommand{\return}{\mathit{return}}
\newcommand{\Identity}{\mathit{Identity}}

\newcommand{\cqq}{\coloneqq}
\newcommand{\EE}[1]{H(#1)}
\newcommand{\EEL}[1]{H_{L}(#1)}
\newcommand{\EELL}[1]{H_{L'}(#1)}
\newcommand{\TT}[1]{\mathcal{T}(#1)}
\newcommand{\TTL}[1]{\mathcal{T}_{L}(#1)}
\newcommand{\TTLL}[1]{\mathcal{T}_{L'}(#1)}

\mathlig{|>}{\triangleright}

\newcommand{\lifted}[1]{#1^\uparrow}
% \newcommand{\ds}[1]{\mathbb{D}_1(#1)}
\newcommand{\DB}[1]{\mathbb{D}_b(#1)}
\newcommand{\dd}{\delta}
\newcommand{\dhl}[1]{\underline{\dd(#1)}}

\AtEndPreamble{%
\theoremstyle{acmdefinition}
\newtheorem{requirement}[theorem]{Requirement}
\newtheorem{assumption}[theorem]{Assumption}
\newtheorem*{lemmaapp}{Lemma}

\theoremstyle{definition}
\newtheorem{goal}{Goal}
}

\newcommand{\mE}{\mathcal{E}}
\newcommand{\mT}{\mathcal{T}}

\newcommand{\mexp}{\varepsilon}
\newcommand{\cexp}{\widetilde{\varepsilon}}
\newcommand{\ce}{\widetilde{e}}
\newcommand{\cb}{\widetilde{b}}

\newcommand{\RefIO}{\textsc{Ref}$_\text{IO}$}

\newcommand{\lr}{\rr{\phantom{E}}}  % ------>
\newcommand{\rr}[1]{\xrightarrow{~#1~}} % ---X-->

\newcommand{\miff}{\text{iff}}
 
\usepackage{tikz}
\usepackage{pifont}

\newcommand{\ctr}[2]{\textsc{#1}({#2})}
\newcommand{\HH}[1]{H(#1)}

\newcommand{\ck}[1]{\mathit{checker}(#1)}
